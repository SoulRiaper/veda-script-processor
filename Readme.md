# Contract notifier for [VEDA](https://github.com/semantic-machines/veda)
Сервис "veda-contract-notifier" разработан с целью отслеживания контрактов с неактуальными ответственными лицами в системе. Данный сервис ищет все активные контракты с неактуальными ответственными лицами.

Если в процессе проверки обнаруживаются контракты, у которых информация об ответственных не актуальна, сервис сначала пытается автоматически вычислить нового ответственного на основе доступных данных.

Если вычислить нового ответственного не получается, контракт направляется на уровень выше — определенной должности, выбранной как стандартный получатель в подобных случаях.

Сервис автоматически формирует и отправляет ему e-mail сообщение с информацией о новой зоне ответственности.

Помимо этого, сервис "veda-contract-notifier" включает систему оповещений в Telegram, которая регулярно сообщает о состоянии сервиса и его текущих и не выполненых задачах, что помогает оперативно реагировать на изменения и обеспечивает прозрачность процесса обновления данных по контрактам.

## Параметры сервиса:
1) Местоположение: ***
2) Логин для входа в систему optiflow: admin

### Корректный формат писем (Есть три разные вариации письма в зависимости от того как высчитался ответственный по контракту):

#### Шаблон письма в случае если ответственный был высчитан по подразделению-исполнителю

> Уведомление. В контрактах указан не актуальный  исполнитель по контракту
>
> В следующих контрактах указан не актуальный исполнитель по контракту. Вы получили данное письмо, как руководитель подразделения по полю "подразделения-исполнитель".
> *Список контрактов*
> Это сообщение сформировано автоматически. Отвечать на него не нужно.
> Система optiflow

#### Шаблон письма в случае если ответственный - исполнитель контракта

> Уведомление. В контрактах указаны не актуальные ответственные лица
>
> В следующих контрактах "сопровождающий по контракту", "подразделение-исполнитель" или "руководитель по контракту" не актуальны:
> *Список контрактов*
> Это сообщение сформировано автоматически. Отвечать на него не нужно.
> Система optiflow

#### Шаблон письма в случае если ответственного вычислить не удалось и контракт ушел контролеру

> Уведомление. Уведомление. В контрактах указаны не актуальные ответственные лица
>
> В следующих контрактах указаны не актуальные ответственые лица.
В данных документах удалены одновременно и "исполнитель по контрактам", и руководитель подразделения исполнителя. Вы получили данное письмо, как контролер по контрактам (роль)
> *Список контрактов*
> Это сообщение сформировано автоматически. Отвечать на него не нужно.
> Система optiflow
